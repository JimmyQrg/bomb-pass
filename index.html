<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Bomb Pass</title><link rel="icon" href="images/icon.png" type="image/png"><link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet"><style>html,body{margin:0;padding:0;overflow:hidden;font-family:"Press Start 2P",monospace;background:#000}canvas{position:absolute;top:0;left:0;width:100%;height:100%;display:block;background:url("images/background-1.png") center/cover no-repeat}#menu,#settings{position:absolute;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:10}#settings{display:none;background:url("images/background-2.png") center/cover no-repeat;color:black}button{font-family:"Press Start 2P";font-size:16px;padding:15px 35px;margin:12px;border:4px solid #000;border-radius:16px;cursor:pointer;transform:scale(1.5);transition:0.2s}button:hover{transform:scale(1.6)}#ui{position:absolute;top:8%;width:100%;text-align:center;color:white;font-size:14px;text-shadow:2px 2px 2px black;z-index:30}</style></head><body><canvas id="game"></canvas><div id="menu"><button id="b2">2 Players</button><button id="b3">3 Players</button><button id="b4">4 Players</button></div><div id="settings"><div class="content"><h1>Game Settings</h1><p>Time: 5-60 seconds</p><input type="number" id="timeInput" min="5" max="60" value="10"/><button id="startBtn">START</button><button id="backBtn">BACK</button></div></div><div id="ui"><div id="timer"></div></div><script>const canvas=document.getElementById("game"),ctx=canvas.getContext("2d");canvas.width=innerWidth;canvas.height=innerHeight;let TILE=16,MAP=500,map=[],players=[],bomb=null,gameState="menu",cam={x:0,y:0,zoom:1},playerCount=2,playerSpeed=4.5,bombSpeed=6,timeLeft=10;const keys={},ctrls=[{u:"w",d:"s",l:"a",r:"d",t:"q"},{u:"ArrowUp",d:"ArrowDown",l:"ArrowLeft",r:"ArrowRight",t:"/"},{u:"i",d:"k",l:"j",r:"l",t:"y"},{u:"t",d:"g",l:"f",r:"h",t:"r"}],assets={wall:new Image(),ground:new Image(),bomb:new Image()};assets.wall.src="images/blocks/wall.png";assets.ground.src="images/blocks/ground-slab.png";assets.bomb.src="images/bomb.png";for(let i=1;i<=4;i++){assets["p"+i]=new Image();assets["p"+i].src="images/players/player-"+i+".png";assets["pb"+i]=new Image();assets["pb"+i].src="images/players/player-"+i+"-bomb.png"}window.addEventListener("keydown",e=>keys[e.key]=true);window.addEventListener("keyup",e=>keys[e.key]=false);document.getElementById("b2").onclick=()=>{playerCount=2;showSettings()};document.getElementById("b3").onclick=()=>{playerCount=3;showSettings()};document.getElementById("b4").onclick=()=>{playerCount=4;showSettings()};const menu=document.getElementById("menu"),settings=document.getElementById("settings"),startBtn=document.getElementById("startBtn"),backBtn=document.getElementById("backBtn"),timeInput=document.getElementById("timeInput"),timerEl=document.getElementById("timer");function showSettings(){menu.style.display="none";settings.style.display="flex"}backBtn.onclick=()=>{settings.style.display="none";menu.style.display="flex"}timeInput.oninput=()=>{const v=parseInt(timeInput.value);if(v>=5&&v<=60){startBtn.disabled=false}else{startBtn.disabled=true}}startBtn.onclick=startGame;function startGame(){settings.style.display="none";gameState="playing";initMap();initPlayers();assignBomb();timeLeft=parseInt(timeInput.value);timerEl.textContent="Time: "+timeLeft;requestAnimationFrame(loop);countdown()}function initMap(){map=[];for(let y=0;y<MAP;y++){map[y]=[];for(let x=0;x<MAP;x++)map[y][x]=0}for(let x=0;x<MAP;x++){map[0][x]=1;map[MAP-1][x]=1}for(let y=0;y<MAP;y++){map[y][0]=1;map[y][MAP-1]=1}for(let i=0;i<200;i++){const size=3+Math.floor(Math.random()*8);const x0=1+Math.floor(Math.random()*(MAP-size-1));const y0=1+Math.floor(Math.random()*(MAP-size-1));for(let y=y0;y<y0+size;y++)for(let x=x0;x<x0+size;x++)map[y][x]=1}}function initPlayers(){players=[];const region={x:Math.floor(MAP/2),y:Math.floor(MAP/2)};for(let i=0;i<playerCount;i++){let placed=false;while(!placed){const sx=region.x+Math.floor(Math.random()*10)-5,sy=region.y+Math.floor(Math.random()*10)-5;if(map[sy]&&map[sy][sx]===0){players.push({x:sx*TILE,y:sy*TILE,vx:0,vy:0,color:["red","blue","green","yellow"][i],alive:true,ctrl:ctrls[i],hasBomb:false,trail:[]});placed=true}}}}function assignBomb(){const r=Math.floor(Math.random()*players.length);players[r].hasBomb=true;bomb={x:players[r].x,y:players[r].y,owner:r,vx:0,vy:0}}function loop(){if(gameState!=="playing")return;requestAnimationFrame(loop);update();render()}function update(){for(let p of players){const spd=playerSpeed*(p.hasBomb?1.5:1);p.x+=p.vx*spd;p.y+=p.vy*spd}handleControls();cameraFollow()}function handleControls(){for(let i=0;i<players.length;i++){const p=players[i];if(!p.alive)continue;p.vx=0;p.vy=0;if(keys[p.ctrl.u])p.vy=-1;if(keys[p.ctrl.d])p.vy=1;if(keys[p.ctrl.l])p.vx=-1;if(keys[p.ctrl.r])p.vx=1;if(keys[p.ctrl.t]&&bomb.owner===i){bomb.vx=(Math.random()-0.5)*bombSpeed;bomb.vy=(Math.random()-0.5)*bombSpeed;bomb.owner=null}}}function cameraFollow(){if(players.length===0)return;let avgX=0,avgY=0,count=0;for(const p of players)if(p.alive){avgX+=p.x;avgY+=p.y;count++}avgX/=count;avgY/=count;cam.x=avgX-canvas.width/2;cam.y=avgY-canvas.height/2}function render(){ctx.clearRect(0,0,canvas.width,canvas.height);ctx.save();ctx.translate(-cam.x,-cam.y);for(let y=0;y<MAP;y++)for(let x=0;x<MAP;x++)ctx.drawImage(map[y][x]?assets.wall:assets.ground,x*TILE,y*TILE,TILE,TILE);for(const p of players){if(!p.alive)continue;ctx.fillStyle=p.color;ctx.beginPath();ctx.arc(p.x,p.y,16,0,Math.PI*2);ctx.fill();if(p.hasBomb)ctx.drawImage(assets.bomb,p.x-8,p.y-8,16,16)}}ctx.restore();function countdown(){const interval=setInterval(()=>{if(gameState!=="playing"){clearInterval(interval);return}timeLeft--;timerEl.textContent="Time: "+timeLeft;if(timeLeft<=0){clearInterval(interval);gameState="menu";menu.style.display="flex"}} ,1000)}</script></body></html>
