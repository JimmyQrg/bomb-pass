<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>Bomb Pass</title><link rel="icon" href="images/icon.png"><link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet"><style>html,body{margin:0;padding:0;overflow:hidden;font-family:"Press Start 2P",monospace}canvas{position:absolute;top:0;left:0;width:100%;height:100%;display:block;background:url("images/background-1.png") center/cover no-repeat;z-index:0}#menu,#settings{position:absolute;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;z-index:10;pointer-events:auto}#menu{margin-top:120px}#settings{display:none;background:url("images/background-2.png") center/cover no-repeat;color:black;justify-content:flex-start;margin-top:120px}img.btn{cursor:pointer;image-rendering:pixelated;margin:8px 0;width:220px;transition:0.1s}#ui{position:absolute;top:5%;width:100%;text-align:center;color:white;font-size:16px;text-shadow:2px 2px 2px black;z-index:11}</style></head><body><canvas id="game"></canvas><div id="menu"><img id="b2" class="btn" src="images/buttons/start-menu/button-2-players.png"><img id="b3" class="btn" src="images/buttons/start-menu/button-3-players.png"><img id="b4" class="btn" src="images/buttons/start-menu/button-4-players.png"></div><div id="settings"><div style="text-align:center;margin-bottom:20px"><h1>Game Settings</h1><p>Time: 5â€“60 seconds</p><input id="timeInput" type="number" min="5" max="60" value="10" style="font-family:'Press Start 2P';width:120px;text-align:center"><br><img id="startBtn" class="btn" src="images/buttons/start/button-start.png"><img id="backBtn" class="btn" src="images/buttons/start/button-back.png"></div></div><div id="ui"><div id="timer"></div></div><script>const c=document.getElementById("game"),x=c.getContext("2d");c.width=innerWidth;c.height=innerHeight;let TILE=16,MAP=500,map=[],players=[],bomb=null,gameState="menu",cam={x:0,y:0,zoom:1},playerCount=2,playerSpeed=6,bombSpeed=9,timeLeft=10;const keys={},ctrls=[{u:"w",d:"s",l:"a",r:"d",t:"q"},{u:"ArrowUp",d:"ArrowDown",l:"ArrowLeft",r:"ArrowRight",t:"/"},{u:"i",d:"k",l:"j",r:"l",t:"y"},{u:"t",d:"g",l:"f",r:"h",t:"r"}],assets={wall:new Image(),ground:new Image(),bomb:new Image()};assets.wall.src="images/blocks/wall.png";assets.ground.src="images/blocks/ground-slab.png";assets.bomb.src="images/bomb.png";for(let i=1;i<=4;i++){assets["p"+i]=new Image();assets["p"+i].src="images/players/player-"+i+".png";assets["pb"+i]=new Image();assets["pb"+i].src="images/players/player-"+i+"-bomb.png"}window.addEventListener("keydown",e=>keys[e.key]=true);window.addEventListener("keyup",e=>keys[e.key]=false);const menu=document.getElementById("menu"),settings=document.getElementById("settings"),startBtn=document.getElementById("startBtn"),backBtn=document.getElementById("backBtn"),timeInput=document.getElementById("timeInput"),timerEl=document.getElementById("timer");function swapImg(id,state){const el=document.getElementById(id);const base="images/buttons/start-menu/button-"+id[1]+"-players";if(state==="lighter")el.src=base+"-lighter.png";else if(state==="press")el.src=base+"-press.png";else el.src=base+".png"}["b2","b3","b4"].forEach(id=>{const el=document.getElementById(id);el.onmouseenter=()=>swapImg(id,"lighter");el.onmouseleave=()=>swapImg(id,"");el.onmousedown=()=>swapImg(id,"press");el.onmouseup=()=>swapImg(id,"lighter")});document.getElementById("b2").onclick=()=>{playerCount=2;showSettings()};document.getElementById("b3").onclick=()=>{playerCount=3;showSettings()};document.getElementById("b4").onclick=()=>{playerCount=4;showSettings()};backBtn.onclick=()=>{settings.style.display="none";menu.style.display="flex"};startBtn.onclick=startGame;function showSettings(){menu.style.display="none";settings.style.display="flex"}timeInput.oninput=()=>{const v=parseInt(timeInput.value);if(v>=5&&v<=60){startBtn.src="images/buttons/start/button-start.png";startBtn.onclick=startGame}else{startBtn.src="images/buttons/start-gray/button-start.png";startBtn.onclick=null}}function startGame(){settings.style.display="none";gameState="playing";initMap();initPlayers();assignBomb();timeLeft=parseInt(timeInput.value);timerEl.textContent="Time: "+timeLeft;requestAnimationFrame(loop);countdown()}function initMap(){map=[];for(let y=0;y<MAP;y++){map[y]=[];for(let x=0;x<MAP;x++)map[y][x]=0}for(let x=0;x<MAP;x++){map[0][x]=1;map[MAP-1][x]=1}for(let y=0;y<MAP;y++){map[y][0]=1;map[y][MAP-1]=1}for(let i=0;i<600;i++){const size=3+Math.floor(Math.random()*10);const x0=1+Math.floor(Math.random()*(MAP-size-1));const y0=1+Math.floor(Math.random()*(MAP-size-1));for(let y=y0;y<y0+size;y++)for(let x=x0;x<x0+size;x++)map[y][x]=1}}function initPlayers(){players=[];const region={x:Math.floor(MAP/2),y:Math.floor(MAP/2)};for(let i=0;i<playerCount;i++){let placed=false;while(!placed){const sx=region.x+Math.floor(Math.random()*8)-4,sy=region.y+Math.floor(Math.random()*8)-4;if(map[sy]&&map[sy][sx]===0){players.push({x:sx*TILE,y:sy*TILE,vx:0,vy:0,alive:true,ctrl:ctrls[i],hasBomb:false});placed=true}}}}function assignBomb(){const r=Math.floor(Math.random()*players.length);players[r].hasBomb=true;bomb={x:players[r].x,y:players[r].y,owner:r,vx:0,vy:0}}function loop(){if(gameState!=="playing")return;requestAnimationFrame(loop);update();render()}function update(){for(let p of players){if(!p.alive)continue;const spd=playerSpeed*(p.hasBomb?1.6:1);if(keys[p.ctrl.u])p.y-=spd;if(keys[p.ctrl.d])p.y+=spd;if(keys[p.ctrl.l])p.x-=spd;if(keys[p.ctrl.r])p.x+=spd;if(keys[p.ctrl.t]&&bomb.owner===players.indexOf(p)){bomb.owner=null;bomb.vx=(Math.random()-0.5)*bombSpeed;bomb.vy=(Math.random()-0.5)*bombSpeed;bomb.x=p.x;bomb.y=p.y}}if(bomb&&!bomb.owner){bomb.x+=bomb.vx;bomb.y+=bomb.vy}cameraFollow()}function cameraFollow(){let avgX=0,avgY=0,c=0;for(const p of players)if(p.alive){avgX+=p.x;avgY+=p.y;c++}if(c>0){avgX/=c;avgY/=c;cam.x=avgX-c.width/2;cam.y=avgY-c.height/2}}function render(){x.clearRect(0,0,c.width,c.height);x.save();x.translate(-cam.x,-cam.y);for(let y=0;y<MAP;y++)for(let z=0;z<MAP;z++)x.drawImage(map[y][z]?assets.wall:assets.ground,z*TILE,y*TILE,TILE,TILE);for(let i=0;i<players.length;i++){const p=players[i];if(p.alive)x.drawImage(p.hasBomb?assets["pb"+(i+1)]:assets["p"+(i+1)],p.x-8,p.y-8,24,24)}if(bomb&&!bomb.owner)x.drawImage(assets.bomb,bomb.x-8,bomb.y-8,16,16);x.restore()}function countdown(){const t=setInterval(()=>{if(gameState!=="playing"){clearInterval(t);return}timeLeft--;timerEl.textContent="Time: "+timeLeft;if(timeLeft<=0){clearInterval(t);gameState="menu";menu.style.display="flex"}},1000)}</script></body></html>
